<div class="animate-fade-in">
    <h4 class="px-4 py-2 text-xs font-bold text-gray-400 uppercase tracking-wider border-b bg-gray-50">
        Recent Activity
    </h4>
    <ul class="divide-y divide-gray-100">
        {% for record in history_records %}
            <li class="p-3 hover:bg-gray-50 transition-colors">
                <div class="flex justify-between items-start">
                    <span class="font-bold text-gray-700 text-xs">
                        {% if record.instance.order_type == 'PO' %}PO-{% else %}REL-{% endif %}{{ record.instance.number }}
                    </span>
                    <span class="text-[9px] text-gray-400">
                        {{ record.history_date|date:"g:i a" }}
                    </span>
                </div>
                <div class="text-xs text-gray-600 mt-0.5">
                    {% if record.history_type == '+' %}
                        Created order
                    {% elif record.history_type == '-' %}
                        Deleted order
                    {% else %}
                        Updated 
                        {% if record.prev_record.status != record.status %}
                            status to <span class="font-bold">{{ record.status }}</span>
                        {% elif record.prev_record.scheduled_date != record.scheduled_date %}
                            date to {{ record.scheduled_date|default:"Unscheduled" }}
                        {% else %}
                            details
                        {% endif %}
                    {% endif %}
                </div>
                <div class="text-[9px] text-gray-400 mt-1 italic">
                    by {{ record.history_user|default:"System" }}
                </div>
            </li>
        {% empty %}
            <li class="p-4 text-center text-gray-400 text-xs italic">
                No activity today.
            </li>
        {% endfor %}
    </ul>
</div>